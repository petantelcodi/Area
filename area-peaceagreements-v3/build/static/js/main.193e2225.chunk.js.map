{"version":3,"sources":["Block.jsx","Group.jsx","Groups.jsx","FilterList.jsx","App.js","index.js"],"names":["Block","_this","Object","classCallCheck","this","_super","call","toggle","setState","state","props","active","colors","_this2","color","index","console","log","dim_block","n","my_x","blockWidth","Math","floor","groupWidth","my_y","blockHeight","foundFilter","entries","item","forEach","_ref","_ref2","slicedToArray","value","indexOf","filter","react_default","a","createElement","ref","id","x","y","stroke","className","width","height","fill","React","Component","Group","items","param2","map","Block_Block","key","Groups","colourData","param1","groupHeight","i","toString","position","src_Group","FilterList","keyStr","keys","obj","Filter","dataWithId","data","groupedByParam1","groupBy","err","groupedByParam1SortedBySize","k","sort","b","length","groupedByParam1SortedByName","dim_groups","sqrt","maxBlocksInAGroup","groupedByParam2","src_FilterList","src_Groups","Area","App_Filter","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.193e2225.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default class Block extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: false,\r\n      // Color list for coloring param2\r\n      colors: [\r\n        \"#CC5151\",\r\n        \"#51CCCC\",\r\n        \"#8ECC51\",\r\n        \"#8E51CC\",\r\n        \"#CCAD51\",\r\n        \"#51CC70\",\r\n        \"#5170CC\",\r\n        \"#CC51AD\",\r\n        \"#CC7F51\",\r\n        \"#BCCC51\",\r\n        \"#60CC51\",\r\n        \"#51CC9E\",\r\n        \"#519ECC\",\r\n        \"#6051CC\",\r\n        \"#BC51CC\",\r\n        \"#9E1452\",\r\n        \"#CFA2B0\",\r\n        \"#CC9651\",\r\n        \"#4BEC4E\",\r\n        \"#E8FA14\",\r\n        \"#1170DD\",\r\n        \"#E8B080\",\r\n        \"#694C33\",\r\n        \"#D8A0CD\",\r\n        \"#803D73\",\r\n        \"DA8E95\",\r\n        \"#831E27\",\r\n        \"#A7B6BC\",\r\n        \"#143E4D\",\r\n        \"#9CF69C\",\r\n        \"#267826\",\r\n        \"#D3E19B\",\r\n        \"#646D40\",\r\n        \"#757575\"\r\n      ]\r\n    };\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState(function(state, props) {\r\n      return {\r\n        active: !this.state.active\r\n      };\r\n    });\r\n  };\r\n  // AgtId\r\n\r\n  // colourData -> array for the colours\r\n\r\n  //\r\n  render() {\r\n    // Set color\r\n    var color = this.state.colors[0];\r\n    var colorFilter =  '#CCCCCC';\r\n\r\n    // Find position block\r\n    var index = this.props.index;\r\n    console.log('== index:', index,' dim_block:',this.props.dim_block );\r\n    //console.group('this.props.dim_block',this.props.dim_block);\r\n    var n = index /  this.props.dim_block;\r\n    console.log('n:', n );\r\n    var my_x = this.props.blockWidth * ( index % Math.floor(this.props.groupWidth/this.props.blockWidth));\r\n    console.log('n % 1',n % 1);\r\n    /*\r\n    if ( n % 1 === 0 ) {\r\n      my_x = 0;\r\n    }else{\r\n      my_x = my_x + this.props.blockWidth;\r\n    }\r\n    */\r\n    var  my_y = Math.floor(n) * this.props.blockHeight;\r\n    console.log('my_x :',my_x)\r\n    console.log('my_y :',my_y)\r\n    \r\n    // Search filter in\r\n    var foundFilter = false;\r\n    Object.entries(this.props.item).forEach(([key, value]) => {\r\n      //console.log(value);\r\n      if(typeof value === 'string' && value.indexOf(this.props.filter)!==-1){\r\n        console.log('===== found the filter:',this.props.filter, 'value :',value);  \r\n        foundFilter = true;\r\n      } \r\n    });\r\n    //var info = this.props.item.blockInfo;\r\n    // Render\r\n    return <rect ref={'block_'+this.props.item.id} x={my_x} y={my_y} stroke=\"#FFFFFF\" className=\"block\"  width={this.props.blockWidth} height={this.props.blockHeight} fill={foundFilter?colorFilter:color} />;\r\n  }\r\n}\r\n\r\n\r\n/* \r\n<div onClick={this.toggle}>\r\n        <div className={this.state.active ? \"active\" : null}>\r\n          {this.props.item.id}\r\n        </div>\r\n        {this.state.active && (\r\n          <pre>{JSON.stringify(this.props.item, null, 2)}</pre>\r\n        )}\r\n      </div>\r\n*/\r\n","import React from \"react\";\r\nimport Block from \"./Block\";\r\n\r\nconst Group = ({ items, filter, param2, blockWidth, blockHeight, dim_block, groupWidth }) => (\r\n  <g>\r\n    {items.map((item, index) => (\r\n      <Block\r\n        item={item}\r\n        filter={filter}\r\n        param2={param2}\r\n        blockWidth={blockWidth}\r\n        blockHeight={blockHeight}\r\n        key={\"block_\" + item.id}\r\n        index={index}\r\n        dim_block={dim_block}\r\n        groupWidth={groupWidth}\r\n      />\r\n    ))}\r\n  </g>\r\n);\r\n\r\nexport default Group;\r\n","import React from \"react\";\r\nimport Group from \"./Group\";\r\n//import MaskLines from \"./MaskLines\";\r\n\r\n//<LinesMask/>\r\nconst Groups = ({ items, colourData, param1, param2, filter, groupWidth, groupHeight, blockWidth, blockHeight,dim_block }) => (\r\n  <div id=\"area\">\r\n    {items.map((item, i) => (\r\n      <div id={\"group_\"+i.toString()} key={\"group_\"+i.toString()} className=\"group\">\r\n        <p>{item.key}</p>\r\n        <svg width={groupWidth} height={groupHeight} id={\"#svg_group_\"+i.toString()} position=\"relative\">\r\n          <Group\r\n          items={item.value} \r\n          colourData={colourData} \r\n          filter={filter} \r\n          param2={param2} \r\n          blockWidth={blockWidth} \r\n          blockHeight={blockHeight}          \r\n          dim_block={dim_block}\r\n          groupWidth={groupWidth}\r\n          />   \r\n        </svg>     \r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default Groups;","/*\r\nimport React from \"react\";\r\n\r\nexport default class FilterList extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = { active: false };\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState(function(state, props) {\r\n      return {\r\n        active: !this.state.active\r\n      };\r\n    });\r\n  };\r\n\r\n  renderObj = () => {\r\n    this.setState(function(state, props) {\r\n      const links = props.items;\r\n      var itemList = [];\r\n      Object.keys(links).map((obj, i) => {\r\n        console.log(\"===>\", obj, i);\r\n        //return <div key={i.toString()}>{obj.toString()}</div>;\r\n        ///return( <div>{obj}</div> );\r\n        itemList.push(obj);\r\n      });\r\n      return {itemList};\r\n    });\r\n  };\r\n\r\n  render() {\r\n\r\n    var itemList = this.renderObj();\r\n\r\n    const Groups = ({ items, param1, param2, filter }) => (\r\n      return(\r\n      <div id=\"group1\">\r\n        <p>Group1</p>\r\n        <Group items={items} filter={filter} param2={param2} />\r\n      </div>\r\n      );\r\n    );\r\n\r\n    //return( <div>list:{this.renderObj()}</div> );\r\n  }\r\n}\r\n\r\n*/\r\n\r\nimport React from \"react\";\r\n\r\nconst FilterList = ({ items, keyStr }) => (\r\n  <div>\r\n    {Object.keys(items).map((obj, i) => (\r\n      <div key={keyStr+i.toString()}>{obj}</div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default FilterList;","// Import ----------------------------------------------\n// React libraries\nimport React from \"react\";\nimport { groupBy } from \"lodash\";\n// Area components\nimport Groups from \"./Groups\";\nimport FilterList from \"./FilterList\";\n// CSS\nimport \"./styles.css\";\n// Data\nimport data from \"./data/data.json\";\nimport config_filters from \"./data/config_filters.json\";\n\n// -----------------------------------------------------\nclass Filter extends React.Component {\n  render() {\n    // Config variables\n    var max_distinc = 50;\n    var area_x = 1100;\n    var area_y = 900;\n    var colors_approach = \"fix\"; // fix, random, gradient\n    var area_title = \"PeaceAgreements.org\";\n    var param1 = \"Reg\";\n    var param2 = \"Reg\";\n    var filter = \"human\";\n\n    // Add Id to data\n    var dataWithId = data.map((x, i) => {\n      x.id = i + 1;\n      return x;\n    });\n    // Nesting the array\n    var groupedByParam1 = groupBy(dataWithId, param1);\n    // Delete property with same name as param1\n    try{ delete groupedByParam1[param1]; }catch(err){}\n    // Sort and \n    var groupedByParam1SortedBySize = Object.keys(groupedByParam1)\n      .map(function(k) {\n        return { key: k, value: groupedByParam1[k] };\n      })\n      .sort(function(a, b) {\n        return b.value.length - a.value.length;\n      });\n    // Sort  \n    var groupedByParam1SortedByName = groupedByParam1SortedBySize ;\n\n    // Calculate size group svg\n    var dim_groups = Math.sqrt(groupedByParam1SortedByName.length);\n    if (dim_groups !== Math.floor(dim_groups)) {\n      dim_groups = Math.floor(dim_groups) + 1;\n    }\n    var groupWidth = Math.floor(area_x / dim_groups);\n    var groupHeight = Math.floor(area_y / dim_groups);\n\n    // Calculate size block rect\n    var maxBlocksInAGroup = groupedByParam1SortedBySize[0].value.length;\n    console.log(groupedByParam1SortedBySize)\n    console.log('maxBlocksInAGroup',maxBlocksInAGroup);\n    var dim_block = Math.sqrt(maxBlocksInAGroup);\n    if (dim_block !== Math.floor(dim_block)) {\n      dim_block = Math.floor(dim_block) + 1;\n    }\n    var blockWidth = Math.floor((groupWidth ) / dim_block); // FIXMEE another corrector (!)\n    var blockHeight = Math.floor((groupHeight) / dim_block); // FIXMEE another corrector (!)\n    console.log('blockWidth: ',blockWidth);\n    console.log('blockHeight: ',blockHeight);\n\n    // Nesting param2 from data\n    var groupedByParam2 = groupBy(dataWithId, param2);\n    // Delete property with same name as param2\n    try{delete groupedByParam2[param2];}catch(err){}\n    console.log(\"groupedBy:\", groupedByParam1);\n    console.log(\"groupedBySorted:\", groupedByParam1SortedByName);\n\n    return (\n      <div>\n        <FilterList items={groupedByParam1} keyStr={\"Param1\"} />\n        <FilterList items={groupedByParam2} keyStr={\"Param2\"} />\n        <Groups\n          items={groupedByParam1SortedByName}\n          colourData={groupedByParam2}\n          param1={param1}\n          param2={param2}\n          filter={filter}\n          groupWidth={groupWidth}\n          groupHeight={groupHeight}\n          blockWidth={blockWidth}\n          blockHeight={blockHeight}\n          dim_block={dim_block}\n        />\n      </div>\n    );\n  }\n}\n\nexport default function Area() {\n  return (\n    <div className=\"Area\">\n      <Filter items={data} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}